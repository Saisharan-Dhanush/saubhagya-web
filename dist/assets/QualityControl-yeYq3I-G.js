import{j as e,s as D,bv as F,T as Q,t as E,g as P,v as L,S as k,z as U,aa as A,ad as M}from"./ui-vendor-CcKJai5_.js";import{r as h}from"./react-vendor-C1G9MTLI.js";import{B as m,C as r,f as n,T as $,g as G,h as y,i as N,I as i,d as x,b as C,c as w,e as T,L as c,j as z}from"./index-C8JM5vnN.js";import{Q as p,a as H,D as J}from"./Purification.config-BxofNtUh.js";import"./utils-BEJD3qDL.js";import"./charts-C1Edd5FR.js";const le=()=>{const[u,S]=h.useState([]),[b,I]=h.useState([]),[Y,K]=h.useState(null),[t,l]=h.useState({batchId:"",cycleId:"",testType:"final_quality",parameters:{ch4:0,co2:0,h2s:0,moisture:0,calificValue:0,density:0},technician:"CURRENT_USER"}),[j,B]=h.useState("");h.useEffect(()=>{const s=[{id:"test-001",batchId:"BATCH-2024-001",cycleId:"cycle-001",testDate:new Date,testType:"final_quality",parameters:{ch4:95.8,co2:2.1,h2s:8.5,moisture:.3,calificValue:9850,density:.72},complianceStatus:"pass",pesoRating:"A+",technician:"LAB001",certificationNumber:"PESO-2024-A+001",labResults:"All parameters within acceptable range. Premium grade quality achieved."},{id:"test-002",batchId:"BATCH-2024-002",cycleId:"cycle-002",testDate:new Date(Date.now()-864e5),testType:"final_quality",parameters:{ch4:92.5,co2:3.2,h2s:15.2,moisture:.6,calificValue:9250,density:.74},complianceStatus:"pass",pesoRating:"B+",technician:"LAB002",certificationNumber:"PESO-2024-B+002"},{id:"test-003",batchId:"BATCH-2024-003",cycleId:"cycle-003",testDate:new Date(Date.now()-1728e5),testType:"final_quality",parameters:{ch4:88.2,co2:6.1,h2s:25.8,moisture:1.2,calificValue:8820,density:.78},complianceStatus:"fail",pesoRating:"Failed",technician:"LAB001",labResults:"CH4 content below minimum threshold. H2S levels exceed acceptable limits."}],a=[{id:"test-pending-001",batchId:"BATCH-2024-004",cycleId:"cycle-004",testDate:new Date,testType:"final_quality",parameters:{ch4:0,co2:0,h2s:0,moisture:0,calificValue:0,density:0},complianceStatus:"pending",pesoRating:"Pending",technician:"LAB001"},{id:"test-pending-002",batchId:"BATCH-2024-005",cycleId:"cycle-005",testDate:new Date,testType:"post_treatment",parameters:{ch4:0,co2:0,h2s:0,moisture:0,calificValue:0,density:0},complianceStatus:"pending",pesoRating:"Pending",technician:"LAB002"}];S(s),I(a)},[]);const v=s=>{for(const a of H)if(s>=a.minCH4)return a;return{level:"Failed",minCH4:0,requirements:[]}},g=s=>s>=p.A.minCH4?"A":s>=p.B.minCH4?"B":s>=p.C.minCH4?"C":"FAILED",_=s=>{switch(s){case"pass":return"bg-green-100 text-green-800";case"fail":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},f=s=>{switch(s){case"A+":return"bg-purple-100 text-purple-800";case"A":return"bg-green-100 text-green-800";case"B+":return"bg-blue-100 text-blue-800";case"B":return"bg-yellow-100 text-yellow-800";case"Failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=()=>{g(t.parameters.ch4);const s=v(t.parameters.ch4),a={id:`test-${Date.now()}`,batchId:t.batchId,cycleId:t.cycleId,testDate:new Date,testType:t.testType,parameters:t.parameters,complianceStatus:t.parameters.ch4>=J.ch4Min?"pass":"fail",pesoRating:s.level,technician:t.technician,certificationNumber:s.level!=="Failed"?`PESO-2024-${s.level}-${Date.now().toString().slice(-3)}`:void 0,labResults:t.labResults};S(d=>[a,...d]),I(d=>d.filter(o=>o.batchId!==t.batchId)),l({batchId:"",cycleId:"",testType:"final_quality",parameters:{ch4:0,co2:0,h2s:0,moisture:0,calificValue:0,density:0},technician:"CURRENT_USER"})},q=u.filter(s=>s.batchId.toLowerCase().includes(j.toLowerCase())||s.pesoRating.toLowerCase().includes(j.toLowerCase())||s.technician.toLowerCase().includes(j.toLowerCase())),R=(()=>{const s=u.slice(0,5),a=s.reduce((o,V)=>o+V.parameters.ch4,0)/s.length,d=s.filter(o=>o.complianceStatus==="pass").length/s.length*100;return{avgCH4:a.toFixed(1),passRate:d.toFixed(1)}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quality Control"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Testing, compliance, and certification management"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(m,{variant:"outline",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Export Reports"]}),e.jsxs(m,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"New Test"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg CH₄ Quality"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[R.avgCH4,"%"]})]}),e.jsx(Q,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pass Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[R.passRate,"%"]})]}),e.jsx(E,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Tests"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:b.length})]}),e.jsx(P,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Certificates"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:u.filter(s=>s.certificationNumber).length})]}),e.jsx(L,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs($,{defaultValue:"tests",className:"w-full",children:[e.jsxs(G,{className:"grid w-full grid-cols-4",children:[e.jsxs(y,{value:"tests",children:["Test Results (",u.length,")"]}),e.jsxs(y,{value:"pending",children:["Pending (",b.length,")"]}),e.jsx(y,{value:"new",children:"New Test"}),e.jsx(y,{value:"compliance",children:"PESO Compliance"})]}),e.jsxs(N,{value:"tests",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(k,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(i,{placeholder:"Search by batch ID, rating, or technician...",value:j,onChange:s=>B(s.target.value),className:"pl-9"})]}),e.jsxs(m,{variant:"outline",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Filter by Date"]})]}),e.jsx("div",{className:"space-y-4",children:q.map(s=>e.jsx(r,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.batchId}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Tested on ",s.testDate.toLocaleDateString()," by ",s.technician]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:_(s.complianceStatus),children:s.complianceStatus}),e.jsxs(x,{className:f(s.pesoRating),children:["PESO ",s.pesoRating]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"CH₄"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[s.parameters.ch4,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"CO₂"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.parameters.co2,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"H₂S"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.parameters.h2s," ppm"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Moisture"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.parameters.moisture,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Calorific"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.parameters.calificValue," kJ/m³"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Density"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.parameters.density," kg/m³"]})]})]}),s.certificationNumber&&e.jsxs("div",{className:"flex items-center justify-between bg-green-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-green-800",children:["Certificate: ",s.certificationNumber]})]}),e.jsxs(m,{size:"sm",variant:"outline",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),"Download"]})]}),s.labResults&&e.jsx("div",{className:"mt-3",children:e.jsxs("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:[e.jsx("strong",{children:"Lab Results:"})," ",s.labResults]})})]})},s.id))})]}),e.jsx(N,{value:"pending",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(C,{children:[e.jsxs(w,{className:"flex items-center",children:[e.jsx(P,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Pending Quality Tests"]}),e.jsx(T,{children:"Tests awaiting completion or results"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:b.map(s=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.batchId}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.testType.replace("_"," ")," - Assigned to ",s.technician]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"bg-yellow-100 text-yellow-800",children:"Pending"}),e.jsx(m,{size:"sm",variant:"outline",children:"Start Test"})]})]},s.id))})})]})}),e.jsx(N,{value:"new",className:"space-y-6",children:e.jsxs(r,{children:[e.jsxs(C,{children:[e.jsxs(w,{className:"flex items-center",children:[e.jsx(F,{className:"w-5 h-5 mr-2 text-blue-600"}),"New Quality Test"]}),e.jsx(T,{children:"Perform quality testing and compliance verification"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Test Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"batchId",children:"Batch ID"}),e.jsx(i,{id:"batchId",value:t.batchId,onChange:s=>l(a=>({...a,batchId:s.target.value})),placeholder:"Enter batch ID"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"cycleId",children:"Cycle ID"}),e.jsx(i,{id:"cycleId",value:t.cycleId,onChange:s=>l(a=>({...a,cycleId:s.target.value})),placeholder:"Enter cycle ID"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"testType",children:"Test Type"}),e.jsxs("select",{id:"testType",className:"w-full p-2 border border-gray-300 rounded-md",value:t.testType,onChange:s=>l(a=>({...a,testType:s.target.value})),children:[e.jsx("option",{value:"pre_treatment",children:"Pre-Treatment"}),e.jsx("option",{value:"post_treatment",children:"Post-Treatment"}),e.jsx("option",{value:"final_quality",children:"Final Quality"})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"technician",children:"Technician"}),e.jsx(i,{id:"technician",value:t.technician,onChange:s=>l(a=>({...a,technician:s.target.value})),placeholder:"Technician ID"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Test Parameters"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"ch4",children:"CH₄ Percentage (%)"}),e.jsx(i,{id:"ch4",type:"number",step:"0.1",min:"0",max:"100",value:t.parameters.ch4,onChange:s=>l(a=>({...a,parameters:{...a.parameters,ch4:parseFloat(s.target.value)||0}}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"co2",children:"CO₂ Percentage (%)"}),e.jsx(i,{id:"co2",type:"number",step:"0.1",min:"0",max:"100",value:t.parameters.co2,onChange:s=>l(a=>({...a,parameters:{...a.parameters,co2:parseFloat(s.target.value)||0}}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"h2s",children:"H₂S Level (ppm)"}),e.jsx(i,{id:"h2s",type:"number",step:"0.1",min:"0",value:t.parameters.h2s,onChange:s=>l(a=>({...a,parameters:{...a.parameters,h2s:parseFloat(s.target.value)||0}}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"moisture",children:"Moisture Content (%)"}),e.jsx(i,{id:"moisture",type:"number",step:"0.1",min:"0",max:"100",value:t.parameters.moisture,onChange:s=>l(a=>({...a,parameters:{...a.parameters,moisture:parseFloat(s.target.value)||0}}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"calorific",children:"Calorific Value (kJ/m³)"}),e.jsx(i,{id:"calorific",type:"number",step:"10",min:"0",value:t.parameters.calificValue,onChange:s=>l(a=>({...a,parameters:{...a.parameters,calificValue:parseFloat(s.target.value)||0}}))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"density",children:"Density (kg/m³)"}),e.jsx(i,{id:"density",type:"number",step:"0.01",min:"0",value:t.parameters.density,onChange:s=>l(a=>({...a,parameters:{...a.parameters,density:parseFloat(s.target.value)||0}}))})]})]})]})]}),t.parameters.ch4>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-2 text-blue-600"}),"Predicted PESO Compliance"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expected Grade:"}),e.jsxs(x,{className:`bg-${p[g(t.parameters.ch4)]?.color}-100 text-${p[g(t.parameters.ch4)]?.color}-800`,children:["Grade ",g(t.parameters.ch4)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"PESO Level:"}),e.jsx(x,{className:f(v(t.parameters.ch4).level),children:v(t.parameters.ch4).level})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"labResults",children:"Lab Results (Optional)"}),e.jsx(z,{id:"labResults",placeholder:"Enter detailed lab results and observations...",value:t.labResults||"",onChange:s=>l(a=>({...a,labResults:s.target.value})),rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(m,{variant:"outline",children:"Save as Draft"}),e.jsxs(m,{onClick:O,disabled:!t.batchId||!t.parameters.ch4,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Submit Test"]})]})]})]})}),e.jsx(N,{value:"compliance",className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(C,{children:[e.jsxs(w,{className:"flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2 text-purple-600"}),"PESO Compliance Standards"]}),e.jsx(T,{children:"Current compliance levels and requirements"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:H.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(x,{className:f(s.level),children:["PESO ",s.level]}),e.jsx(M,{className:"w-4 h-4 text-yellow-500"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Min CH₄: ",s.minCH4,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Requirements:"}),e.jsx("ul",{className:"text-sm text-gray-600 list-disc list-inside space-y-1",children:s.requirements.map((a,d)=>e.jsx("li",{children:a},d))})]})]},s.level))})})]})})]})]})};export{le as QualityControl};
//# sourceMappingURL=QualityControl-yeYq3I-G.js.map
