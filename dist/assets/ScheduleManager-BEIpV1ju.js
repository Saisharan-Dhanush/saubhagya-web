import{j as e,A as y,h as w,u as g,I as S,J as C,_ as T,S as _,a6 as $,au as z,t as U,m as H,n as R}from"./ui-vendor-CnKvLbpM.js";import{r as n}from"./react-vendor-XSK8c6JV.js";import{C as l,f as r,B as d,d as h}from"./index-Cwg1D4Xy.js";import{t as q}from"./mockDataService-DPeHm-bU.js";import"./utils-Bj4fnUCk.js";import"./charts-D-uCZeDt.js";const O=()=>{const[o,k]=n.useState([]),[I,p]=n.useState(!0),[N,f]=n.useState(null),[m,D]=n.useState(""),[v,M]=n.useState(!1),[t,j]=n.useState({status:"all",priority:"all",date:"all"});n.useEffect(()=>{(async()=>{try{p(!0);const a=await q.getSchedules();a.success?k(a.data):f("Failed to load schedules")}catch{f("Failed to load schedules")}finally{p(!1)}})()},[]);const P=s=>{const i={scheduled:{color:"bg-blue-500",label:"Scheduled"},confirmed:{color:"bg-green-500",label:"Confirmed"},in_transit:{color:"bg-yellow-500",label:"In Transit"},delivered:{color:"bg-emerald-500",label:"Delivered"},cancelled:{color:"bg-red-500",label:"Cancelled"}}[s];return e.jsx(h,{className:`${i.color} text-white`,children:i.label})},L=s=>{const i={low:{color:"bg-gray-500",label:"Low"},medium:{color:"bg-blue-500",label:"Medium"},high:{color:"bg-orange-500",label:"High"},urgent:{color:"bg-red-500",label:"Urgent"}}[s];return e.jsx(h,{variant:"outline",className:`${i.color} text-white border-0`,children:i.label})},b=o.filter(s=>{const a=s.customerName.toLowerCase().includes(m.toLowerCase())||s.customerAddress.toLowerCase().includes(m.toLowerCase()),i=t.status==="all"||s.status===t.status,u=t.priority==="all"||s.priority===t.priority;return a&&i&&u}),A=s=>`${s.start} - ${s.end}`,F=s=>new Date(s).toLocaleDateString("en-IN",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),B=()=>{const s=o.length,a=o.filter(c=>c.status==="scheduled").length,i=o.filter(c=>c.status==="confirmed").length,u=o.filter(c=>c.status==="in_transit").length,E=o.filter(c=>c.priority==="urgent").length;return{total:s,scheduled:a,confirmed:i,inTransit:u,urgent:E}};if(I)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Schedule Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage biogas delivery schedules and appointments"})]}),e.jsx("div",{className:"animate-pulse space-y-4",children:Array.from({length:5}).map((s,a)=>e.jsx(l,{children:e.jsxs(r,{className:"pt-6",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]})},a))})]});if(N)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Schedule Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage biogas delivery schedules and appointments"})]}),e.jsx(l,{className:"border-red-200 bg-red-50",children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-800",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:N})]}),e.jsx(d,{onClick:()=>window.location.reload(),className:"mt-4",variant:"outline",children:"Retry"})]})})]});const x=B();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Schedule Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage biogas delivery schedules and appointments"})]}),e.jsxs(d,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"New Schedule"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Schedules"}),e.jsx("p",{className:"text-2xl font-bold",children:x.total})]}),e.jsx(g,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.scheduled})]}),e.jsx(S,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Confirmed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.confirmed})]}),e.jsx(C,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Transit"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x.inTransit})]}),e.jsx(T,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Urgent"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.urgent})]}),e.jsx(y,{className:"h-8 w-8 text-red-600"})]})})})]}),e.jsx(l,{children:e.jsxs(r,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by customer name or address...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:m,onChange:s=>D(s.target.value)})]}),e.jsxs(d,{variant:"outline",onClick:()=>M(!v),className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]})]}),v&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2",value:t.status,onChange:s=>j({...t,status:s.target.value}),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"in_transit",children:"In Transit"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2",value:t.priority,onChange:s=>j({...t,priority:s.target.value}),children:[e.jsx("option",{value:"all",children:"All Priority"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2",value:t.date,onChange:s=>j({...t,date:s.target.value}),children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"tomorrow",children:"Tomorrow"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[b.map(s=>e.jsx(l,{className:"hover:shadow-md transition-shadow",children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.customerName}),P(s.status),L(s.priority)]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:F(s.deliveryDate)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:A(s.timeSlot)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[s.biogasQuantity,"kg Biogas"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:s.customerPhone})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(T,{className:"h-4 w-4 text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.customerAddress})]}),s.specialInstructions&&e.jsx("div",{className:"p-2 bg-yellow-50 border-l-4 border-yellow-400",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Special Instructions:"})," ",s.specialInstructions]})}),(s.vehicleId||s.driverId)&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[s.vehicleId&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Vehicle:"}),e.jsx(h,{variant:"outline",children:s.vehicleId})]}),s.driverId&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:"Driver:"}),e.jsx(h,{variant:"outline",children:s.driverId})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Cost"}),e.jsxs("div",{className:"text-xl font-bold",children:["â‚¹",s.cost.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.estimatedDuration," mins"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),"Cancel"]})]}),s.status==="scheduled"&&e.jsxs(d,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"Confirm"]})]})]})})},s.id)),b.length===0&&e.jsx(l,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No schedules found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:m||t.status!=="all"||t.priority!=="all"?"Try adjusting your search or filters.":"No delivery schedules have been created yet."}),e.jsxs(d,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Create New Schedule"]})]})})})]})]})};export{O as ScheduleManager,O as default};
//# sourceMappingURL=ScheduleManager-BEIpV1ju.js.map
