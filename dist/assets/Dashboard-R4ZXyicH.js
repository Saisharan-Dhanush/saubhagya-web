import{j as e,K as h,N as b,a3 as u,_ as j,U as y,y as w,bL as D,J as L,I as T,ac as M}from"./ui-vendor-CnKvLbpM.js";import{r as d}from"./react-vendor-XSK8c6JV.js";import{C as t,b as r,f as l,B as n,c,d as x,e as o}from"./index-Cwg1D4Xy.js";import{t as R}from"./mockDataService-DPeHm-bU.js";import"./utils-Bj4fnUCk.js";import"./charts-D-uCZeDt.js";const U=()=>{const[a,A]=d.useState(null),[m,S]=d.useState([]),[C,v]=d.useState(!0),[g,P]=d.useState(null);d.useEffect(()=>{(async()=>{try{v(!0);const[i,f]=await Promise.all([R.getDashboardStats(),R.getAlerts()]);i.success&&A(i.data),f.success&&S(f.data)}catch{P("Failed to load dashboard data")}finally{v(!1)}})()},[]);const $=()=>a?[{label:"Active Deliveries",value:a.activeDeliveries,icon:e.jsx(u,{className:"h-6 w-6"}),status:"info",trend:{value:12,isPositive:!0}},{label:"Completed Today",value:a.completedToday,icon:e.jsx(L,{className:"h-6 w-6"}),status:"success",trend:{value:8,isPositive:!0}},{label:"Pending Schedules",value:a.pendingSchedules,icon:e.jsx(T,{className:"h-6 w-6"}),status:"warning",trend:{value:5,isPositive:!1}},{label:"Vehicles On Route",value:a.vehiclesOnRoute,icon:e.jsx(j,{className:"h-6 w-6"}),status:"info"},{label:"Avg Delivery Time",value:`${a.averageDeliveryTime}min`,icon:e.jsx(w,{className:"h-6 w-6"}),status:"success",trend:{value:3,isPositive:!0}},{label:"On-Time Rate",value:`${a.onTimeDeliveryRate}%`,icon:e.jsx(b,{className:"h-6 w-6"}),status:a.onTimeDeliveryRate>=90?"success":"warning",trend:{value:2.5,isPositive:!0}},{label:"Revenue Today",value:`₹${(a.revenueToday/1e3).toFixed(0)}K`,icon:e.jsx(M,{className:"h-6 w-6"}),status:"success",trend:{value:15,isPositive:!0}},{label:"Fuel Consumption",value:`${a.fuelConsumption}L`,icon:e.jsx(D,{className:"h-6 w-6"}),status:"info",trend:{value:8,isPositive:!1}}]:[],N=s=>{switch(s){case"success":return"bg-green-500";case"warning":return"bg-yellow-500";case"danger":return"bg-red-500";case"info":default:return"bg-blue-500"}},k=s=>{switch(s){case"critical":return"border-red-200 bg-red-50 text-red-800";case"high":return"border-orange-200 bg-orange-50 text-orange-800";case"medium":return"border-yellow-200 bg-yellow-50 text-yellow-800";case"low":default:return"border-blue-200 bg-blue-50 text-blue-800"}},F=s=>{switch(s){case"delivery_delay":return e.jsx(T,{className:"h-4 w-4"});case"vehicle_breakdown":return e.jsx(h,{className:"h-4 w-4"});case"route_issue":return e.jsx(j,{className:"h-4 w-4"});case"maintenance_due":return e.jsx(u,{className:"h-4 w-4"});case"customer_complaint":return e.jsx(y,{className:"h-4 w-4"});default:return e.jsx(h,{className:"h-4 w-4"})}};if(C)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transport Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time biogas delivery operations overview"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((s,i)=>e.jsxs(t,{className:"animate-pulse",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"}),e.jsx("div",{className:"h-6 w-6 bg-gray-300 rounded"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"h-8 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-20"})]})]},i))})]});if(g)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transport Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time biogas delivery operations overview"})]}),e.jsx(t,{className:"border-red-200 bg-red-50",children:e.jsxs(l,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-800",children:[e.jsx(h,{className:"h-5 w-5"}),e.jsx("span",{children:g})]}),e.jsx(n,{onClick:()=>window.location.reload(),className:"mt-4",variant:"outline",children:"Retry"})]})})]});const _=$(),p=m.filter(s=>!s.isRead);return m.filter(s=>s.severity==="critical"||s.severity==="high"),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Transport Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time biogas delivery operations overview"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:_.map((s,i)=>e.jsxs(t,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:s.label}),e.jsx("div",{className:`p-2 rounded-lg ${N(s.status)} bg-opacity-10`,children:e.jsx("div",{className:`${N(s.status)} bg-opacity-100 text-white rounded p-1`,children:s.icon})})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.value}),s.trend&&e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(b,{className:`h-3 w-3 mr-1 ${s.trend.isPositive?"text-green-500":"text-red-500 rotate-180"}`}),e.jsxs("span",{className:`text-xs ${s.trend.isPositive?"text-green-600":"text-red-600"}`,children:[s.trend.isPositive?"+":"",s.trend.value,"%"]})]})]})]},i))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(c,{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"System Alerts"}),p.length>0&&e.jsx(x,{variant:"destructive",className:"ml-2",children:p.length})]}),e.jsx(o,{children:"Issues requiring attention"})]}),e.jsx(n,{variant:"outline",size:"sm",children:"View All"})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[m.slice(0,5).map(s=>e.jsx("div",{className:`p-3 rounded-lg border ${k(s.severity)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[F(s.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:s.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs opacity-75",children:new Date(s.timestamp).toLocaleTimeString()}),s.actionRequired&&e.jsx(x,{variant:"outline",className:"text-xs",children:"Action Required"})]})]})]}),!s.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1"})]})},s.id)),m.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No alerts at this time"})]})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Quick Actions"}),e.jsx(o,{children:"Frequently used operations"})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(n,{variant:"outline",className:"h-20 flex-col space-y-2",children:[e.jsx(u,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Add Delivery"})]}),e.jsxs(n,{variant:"outline",className:"h-20 flex-col space-y-2",children:[e.jsx(j,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Optimize Route"})]}),e.jsxs(n,{variant:"outline",className:"h-20 flex-col space-y-2",children:[e.jsx(y,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"Assign Driver"})]}),e.jsxs(n,{variant:"outline",className:"h-20 flex-col space-y-2",children:[e.jsx(w,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm",children:"View Reports"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Delivery Performance"}),e.jsx(o,{children:"This month's metrics"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"On-Time Deliveries"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[a?.onTimeDeliveryRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${a?.onTimeDeliveryRate}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Average Delivery Time"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[a?.averageDeliveryTime,"min"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Customer Satisfaction"}),e.jsx("span",{className:"text-sm font-bold text-purple-600",children:"4.6/5"})]})]})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Fleet Status"}),e.jsx(o,{children:"Vehicle utilization"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Active Vehicles"}),e.jsx(x,{className:"bg-green-500",children:"6"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Under Maintenance"}),e.jsx(x,{className:"bg-yellow-500",children:"1"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Idle Vehicles"}),e.jsx(x,{className:"bg-gray-500",children:"2"})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Fleet Efficiency: 87%"})]})})]})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Revenue Summary"}),e.jsx(o,{children:"Financial overview"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm",children:"Today"}),e.jsxs("span",{className:"text-sm font-bold",children:["₹",(a?.revenueToday||0).toLocaleString()]})]}),e.jsx("div",{className:"text-xs text-green-600",children:"+15% from yesterday"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm",children:"This Month"}),e.jsx("span",{className:"text-sm font-bold",children:"₹24.8L"})]}),e.jsx("div",{className:"text-xs text-green-600",children:"+8% from last month"})]}),e.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Profit Margin"}),e.jsx("span",{className:"text-sm font-bold text-green-800",children:"32%"})]})})]})})]})]})]})};export{U as Dashboard,U as default};
//# sourceMappingURL=Dashboard-R4ZXyicH.js.map
